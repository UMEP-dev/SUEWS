Pipeline,Type,Trigger logic,Validation logic,Validation rationale,Trigger parameters,Affected parameters
B,Conditional required,Always triggered,Validates that all critical physics model options parameters are present and non-null.,All physics model options must be set for running the model.,All model physics options ,All model physics options 
C/Pydantic,Conditional required,Always triggered,"Validates all site parameters are complete; runs site-by-site checks and conditional validations (STEBBS, RSL, storage).","Site parameters are fundamental for model runs, so must be present.",All model physics options; all site properties,All model physics options; all site properties
C/Pydantic,Conditional required,stebbsmethod == 1,All STEBBS parameters must be present and non-null when stebbsmethod==1.,"stebbsmethod==1 select STEBBS on, so all STEBBS parameters must be present.",stebbsmethod,All STEBBS-related parameters
C/Pydantic,Conditional required,rslmethod == 2 && bldgs.sfr > 0,"When rslmethod==2 and buildings present (bldgs.sfr > 0), faibldg parameter must be set.","When rslmethod==2, if buildings are present (bldgs.sfr >0), faibldg (building frontal area index) is required so roughness-sublayer energy exchanges can be calculated correctly. ",rslmethod; bldgs.sfr,faibldg
C/Pydantic,Conditional required,storageheatmethod == 6,"Validates that walls[0].thermal_layers contains non-empty numeric lists for dz, k and rho_cp; require properties.lambda_c to be set and non-null. ",***,storageheatmethod,"vertical_layers.walls[0].thermal_layers.dz; vertical_layers.walls[0].thermal_layers.k; vertical_layers.walls[0].thermal_layers.rho_cp, properties.lambda_c"
C/Pydantic,Conditional required,Always triggered,Validates that all critical physics model options parameters are present and non-null.,All physics model options must be set for running the model.,All model physics options ,All model physics options 
C/Pydantic,Conditional required,Always triggered,Critical site fields must be non-null and valid; enforces physical constraint z0m_in < zdm_in ,"Site parameters are fundamental for model runs, so must be present. The roughness inputs must satify z0m_in < zdm_in so the displacement height lies above the roughness length and the roughness profile remains physically consistent.",lat; lng; alt; timezone; surfacearea; z; z0m_in; zdm_in; pipecapacity; runofftowater; narp_trans_site,lat; lng; alt; timezone; surfacearea; z; z0m_in; zdm_in; pipecapacity; runofftowater; narp_trans_site
A,Cross parameters,model.physics present,Detects presence/absence (or renamed keys) of critical physics options early and add them to the updated YAML,All physics model options must be present for running the model.,All model physics options ,All model physics options 
A,Cross parameters,nlayer specified,"Validates vertical-layer array dimensions vs nlayer: veg_frac/veg_scale/building_frac/building_scale must have nlayer elements; height must have nlayer+1; roofs/walls must contain nlayer substructures. If too short, pads with nulls (or null-template substructures) and records dimension_errors; if too long, records error (does not trim).",Vertical-layer arrays must be coherent with nlayer value.,nlayer; veg_frac; veg_scale; building_frac; building_scale; height,nlayer; veg_frac; veg_scale; building_frac; building_scale; height
B,Cross parameters,Always triggered,Validates interdependency rules between physics model options: rslmethod==2 requires stabilitymethod==3; stabilitymethod==1 requires rslmethod present; storageheatmethod==1 requires ohmincqf==0 ,Enforces that coupled physics model options are used in combinations that the model actually supports and was designed for.,rslmethod; stabilitymethod; storageheatmethod; ohmincqf,rslmethod; stabilitymethod; storageheatmethod; ohmincqf
B,Cross parameters,Always triggered,"Validates that land_cover exists; sums surface fractions read from land_cover.sfr.value and checks sum ≈ 1.0 (tolerance abs(diff) > 1e-4; if sum == 0.0 reports error ""All surface fractions are zero or missing""; otherwise reports ERROR showing current sum and suggests adjusting the largest surface fraction (does not auto-correct). Collects active surfaces (sfr>0) and reports missing/incomplete surface parameters when detected",Land cover fractions must be set correctly for a model run.,All land cover surfaces,All land cover surfaces
B,Cross parameters,ie_start or ie_end specified,Validates irrigation DOY parameters per site: ensures ie_start and ie_end are both present or both absent; checks DOY range (1..365 or 366 depending on model_year); enforces pairing and emits ERRORs for missing/invalid values; applies hemisphere-aware seasonal checks (Northern Hemisphere typical warm season ≈ DOY 121–273; Southern Hemisphere warm season usually year‑wrapping — non‑wrapping SH periods flagged as WARNING); detects unusual year‑wrapping patterns,"Ensures irrigation periods are defined for each site. When any irrigation DOY is provided, both ie_start and ie_end must be valid, in-range and seasonally reasonable.",ie_start; ie_end; lat; start_time,ie_start; ie_end
B,Cross parameters,startdls or enddls specified,"Validates DOY values for startdls/enddls (consistency both set or both None), enforces DOY range and leap‑year rules (DOY 366 only allowed in leap years when model_year known), compares user values to location‐based calculated DLS and records INFO/WARNING messages; populate startdls/enddls when missing or different from the calculated ones","Ensures daylight savings start/end days are specified within valid DOY ranges and compatible with leap-year rules. When provided, startdls and enddls are checked and auto-filled or flagged if missing/inconsistent with the calculated dates.",start_time; lat; lng,startdls; enddls
C/Pydantic,Cross parameters,netradiationmethod == 1 && forcing_file looks like sample,"Warns if netradiationmethod==1 (needs observed Ldown) but forcing file appears to be sample data (filenames containing ""forcing.txt"", ""sample_forcing.txt"" or ""test_forcing.txt"")","If netradiationmethod==1 is selected but the forcing file name suggests sample/test data, a warning is issued because this model option expects real observed longwave radiation inputs.",netradiationmethod; forcing_file,netradiationmethod; forcing_file
C/Pydantic,Cross parameters,startdls or enddls specified,"Validates daylight saving time parameters: (1) consistency (both set or both None), (2) leap year refinement (DOY 366 only valid in leap years), (3) compares user values against calculated DLS and record informational messages if values differ","Ensures daylight savings start/end days are specified within valid DOY ranges and compatible with leap-year rules. When provided, startdls and enddls are checked and differences with calculated dates are reported as informational messages.",startdls; enddls; lat; start_time,startdls; enddls
C/Pydantic,Cross parameters,Always triggered,"Enforces alb_min <= alb_max for evetr, dectr, grass",Values of albedo max and min must be set correctly. ,alb_min; alb_max,alb_min; alb_max
C/Pydantic,Cross parameters,Always triggered,Enforces pormin_dec < pormax_dec ,Values of porosity max and min of deciduous trees must be set correctly. ,pormin_dec; pormax_dec,pormin_dec; pormax_dec
C/Pydantic,Cross parameters,Always triggered,Enforces crwmin < crwmin and snowalbmin < snowalbmax,Ensures minimum and maximum parameters pairs respect their physical ordering.  ,snowalbmin; snowalbmax; crwmin; crwmax,snowalbmin; snowalbmax; crwmin; crwmax
A,Data validation,forcing_file specified,"Validates forcing data file(s) referenced in YAML: checks existence, handles RefValue/list entries, loads files and runs quality checks  (missing critical vars, NaNs, physical ranges, irregular time steps), adds filename context; returns (forcing_errors, forcing_file_paths); can be disabled via --forcing off","Guarantees that referenced forcing files are real, readable, and physically usable before running the model. ",forcing_file,forcing_file
C/Pydantic,Field transformation,groups specified,"Validates output groups against allowed set: {SUEWS, DailyState, snow, ESTM, RSL, BL, debug, SPARTACUS, EHC, STEBBS}",Ensures requested output groups are valid. Any group names are checked against the allowed set so that only recognised output collections are enabled.,groups,groups
C/Pydantic,Field transformation,Always triggered,Converts numpy float/int types to Python native float/int for tstep and diagnose,NumPy numeric types in tstep and diagnose are converted to native Python int/float so Pydantic and other consumers see consistent primitive types.,tstep; diagnose,tstep; diagnose
C/Pydantic,Field transformation,timezone is numeric,Converts numeric timezone offset values to TimezoneOffset enum,"Numeric UTC offsets are mapped to the TimezoneOffset enum so time handling and validation are unified across configurations.
When a temperature field is provided, it is reshaped/validated as a 5-element array so the multi-layer surface scheme receives a complete and correctly sized profile.",timezone,timezone
C/Pydantic,Field transformation,temperature field present,Ensures temperature is properly formatted as 5-element array for multi-layer surfaces,"When a temperature field is provided, it is reshaped/validated as a 5-element array so the multi-layer surface scheme receives a complete and correctly sized profile.",temperature,temperature
C/Pydantic,Field transformation,Schedule data present,"Validates working_day and holiday format: converts keys to strings, ensures keys are integers 1–24 and that all hours 1..24 are present",Profiles must have correct format for running the model.,working_day; holiday,working_day; holiday
B,Physical constraint,Always triggered,"Validates geographic coordinates are numeric and in valid ranges (lat: -90 to 90, lng: -180 to 180) and calculates timezone/DST if missing (may then populate startdls/enddls)","Latitude and longitude must be correct, and daylight saving times must be appropriate to them.",lat; lng; timezone; startdls; enddls,lat; lng; timezone; startdls; enddls
C/Pydantic,Physical constraint,output_file is OutputConfig,Output frequency must be positive and a multiple of timestep,Ensures that the requested output frequency is temporally consistent with the model time step. The output interval must be strictly positive and an integer multiple of tstep so outputs align exactly with simulation timesteps.,tstep; freq,tstep; freq
B,Scientific adjustment,Always triggered,Computes sfr_sum; if 0.9999 <= sfr_sum < 1.0 increase largest sfr; if 1.0 < sfr_sum <= 1.0001 decrease largest sfr; when a correction is applied write back to land_cover[<max_surface>].sfr.value and report; if abs(sfr_sum - 1.0) > 1e-4 do not auto-fix and emit an error instead,Correction of small errors in land cover fractions before model run.,All land cover surfaces,All land cover surfaces
B,Scientific adjustment,needs start_date and CRU data available,"Automatically sets initial surface temperatures using CRU monthly/annual means for the simulation start month and site location: updates initial_states.<surface>.temperature (5-layer), tsfc, tin where present; sets stebbs.InitialOutdoorTemperature to monthly mean and stebbs.DeepSoilTemperature to CRU annual mean","When a start date and CRU data are available, temperature, tin, tsfc, InitialOutdoorTemperature and DeepSoilTemperature are set from CRU monthly/annual means for the site location, providing realistic starting conditions from DyOHM/STEBBS and reducing spin-up artifacts.",start_time; lat; lng,temperature; tin; tsfc; InitialOutdoorTemperature; DeepSoilTemperature
B,Scientific adjustment,Season-dependent,"Applies season-dependent adjustments: nullifies initial_states.snowalb for summer/tropical/equatorial; sets initial_states.dectr.lai_id from dectr.lai.laimin/laimax (summer=laimax, winter=laimin, spring/fall=average, tropical=laimax) only when dectr.sfr>0; skips surfaces with sfr==0","Based on start date and latitude, it zeroes snow albedo in warm seasons and sets deciduous LAI between laimin and laimax only where trees are present, ensuring seasonally plausible initial states.",start_time; lat; dectr.sfr; dectr.lai.laimin; dectr.lai.laimax,"snowalb, lai_id"
B,Scientific adjustment,"emissionsmethod in {0,1,2,3,4}","Automatically nullifies CO2-related site parameters (including day/hourly profiles, and resp_a, resp_b and the listed *_bioco2 keys in vegetated surfaces); record the nullified values in the report.","Carbon-related parameters must be not checked when emissionsmethod in {0,1,2,3,4}.",emissionsmethod,All carbon-related parameters
B,Scientific adjustment,stebbsmethod==0,Automatically nullifies all STEBBS parameters (including stebbs and building_archetype blocks); ); record the nullified values in the report.,STEBBS-related parameters must be not checked when STEBBS is off.,stebbsmethod,All STEBBS-related parameters